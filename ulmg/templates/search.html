{% extends 'base.html' %}

{% block content %}

{% include "includes/search_bar.html" %}

<div class="columns">
    <div class="column">
        {% if players %}
            <p>Found <strong>{{ players.paginator.count }} player{% if players.paginator.count > 1 %}s{% endif %}</strong> that match your query.<br/><a href="?page={{ players.number }}&{{ q_string }}&csv=true"><strong>Download this search &dtrif;</strong></a></p>
        {% else %}
            <p>No players found.</p>
        {% endif %}
    </div>
</div>

{% if players.paginator.count > 99 %}{% include "includes/pagination.html" %}{% endif %}

<table class="table is-fullwidth" data-sortable>
    <thead>
        <tr>
            <th data-sortable-type="alpha">Name</th>
            <th data-sortable-type="numeric">Age</th>
            <th data-sortable-type="alpha">Position</th>
            <th data-sortable-type="alpha">Level</th>
            <th data-sortable-type="alpha">Team</th>
            <th data-sortable-type="numeric">Owned?</th>
            <th data-sortable-type="numeric">Carded?</th>
            <th data-sortable-type="numeric">Pro?</th>
            <th data-sortable-type="numeric">Prospect?</th>
            <th data-sortable-type="numeric">Relief?</th>
            <th data-sortable-type="numeric">PA</th>
            <th data-sortable-type="numeric">IP</th>
            <th data-sortable-type="numeric">ST</th>
            {% if value %}
            <th data-sortable-type="numeric">RAAR</th>
            <th data-sortable-type="numeric">RAAL</th>
            <th data-sortable-type="numeric">RAAT</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
    {% for p in players %}
        <tr>
            <td data-value="{{ p.name }}" style="text-align: left!important;"><span class="has-text-weight-semibold" data-value="{{ p.name }}">
                {{ p.name }}</a> <a href="/admin/ulmg/player/{{ p.id }}/change/">&#x270E;<br/>
                {% if p.bref_url %}<a class="has-text-weight-light is-size-6" target="_blank" href="{{ p.bref_url }}">BBR &Gt;</a>{% endif %}
                {% if p.fg_url %}<a class="has-text-weight-light is-size-6" target="_blank" href="{{ p.fg_url }}">FG &Gt;</a>{% endif %}
                {% if p.ba_url %}<a class="has-text-weight-light is-size-6"  target="_blank" href="{{ p.ba_url }}">BA &Gt;</a>{% endif %}
            </td>
            <td data-value="{{ p.age|default_if_none:"0" }}">{{ p.age|default_if_none:"-" }}</td>
            <td data-value="{{ p.position }}">{{ p.position }}</td>
            <td data-value="{{ p.level|default_if_none:"Z" }}<">{{ p.level|default_if_none:"" }}</td>
            <td data-value="{{ p.team|default_if_none:"AAAAAAAAA" }}">{% if p.team %}<a href="/teams/{{ p.team.abbreviation }}/">{{ p.team }}</a>{% else %}-{% endif %}</td>
            <td data-value="{% if p.is_owned %}1{% else %}0{% endif %}">{% if p.is_owned %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td data-value="{% if p.is_carded %}1{% else %}0{% endif %}">{% if p.is_carded %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td data-value="{% if p.is_amateur %}1{% else %}0{% endif %}">{% if p.is_amateur %}<span class="red">&cross;</span>{% else %}<span class="green">&checkmark;</span>{% endif %}</td>
            <td data-value="{% if p.is_prospect %}1{% else %}0{% endif %}">{% if p.is_prospect %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td data-value="{% if p.is_relief_eligible %}1{% else %}0{% endif %}">{% if p.is_relief_eligible %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td data-value="{{ p.plate_appearances|default_if_none:"0" }}">{{ p.plate_appearances|default_if_none:"-" }}</td>
            <td data-value="{{ p.relief_innings_pitched|default_if_none:"0" }}">{{ p.relief_innings_pitched|default_if_none:"-" }}</td>
            <td data-value="{{ p.starts|default_if_none:"0" }}">{{ p.starts|default_if_none:"-" }}</td>
            {% if value %}
            <td data-value="{{ p.raar|default_if_none:"-99999" }}">{{ p.raar|default_if_none:"-" }}</td>
            <td data-value="{{ p.raal|default_if_none:"-99999" }}">{{ p.raal|default_if_none:"-" }}</td>
            <td data-value="{{ p.raat|default_if_none:"-99999" }}">{{ p.raat|default_if_none:"-" }}</td>
            {% endif %}
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if players.paginator.count > 99 %}{% include "includes/pagination.html" %}{% endif %}
{% endblock %}