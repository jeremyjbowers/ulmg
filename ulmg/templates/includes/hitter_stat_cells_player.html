{% load ulmg_tags %}
<td>{% if p.current_mlb_org %}{{ p.current_mlb_org }}{% elif p.get_best_stat_season and p.get_best_stat_season.mlb_org %}{{ p.get_best_stat_season.mlb_org }}{% else %}-{% endif %}</td>

<td style="max-width:75px;">{% if p.defense_display %}{{ p.defense_display }}{% else %}{{ p.position }}{% endif %}</td>

<!-- <td data-value="{% if p.roster_status != "" %}{{ p.roster_status|default_if_none:"-" }}{% else %}-{% endif %}">
    {% if p.roster_status != "" %}{{ p.roster_status|default_if_none:"-" }}{% else %}-{% endif %}
</td> -->

{% with best_stats=p.get_best_stat_season %}
<td data-value="{{ p.role_type|default_if_none:"-" }}">
    {{ p.role_type|default_if_none:"-" }}
</td>

<td data-value="{{ p.role|default_if_none:"-" }}">
    {% if best_stats %}
        {% if best_stats.hit_stats.level %}
            {{ best_stats.hit_stats.level }}
        {% else %}
            {% if best_stats.clean_classification == "mlb" %}
                MLB
            {% elif best_stats.clean_classification == "npb" %}
                NPB
            {% elif best_stats.clean_classification == "kbo" %}
                KBO
            {% elif best_stats.clean_classification == "college" %}
                NCAA
            {% else %}
                -
            {% endif %}
        {% endif %}
    {% else %}
        -
    {% endif %}
</td>

<td data-value="{% if best_stats %}{% if best_stats.clean_classification %}{{ best_stats.season }} {{ best_stats.clean_classification|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}">
    {% if best_stats %}{% if best_stats.clean_classification %}{{ best_stats.season }} {{ best_stats.clean_classification|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>

<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.pa|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.pa|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.avg|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.avg|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.obp|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.obp|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.slg|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.slg|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.hr|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.hr|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.sb|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.sb|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.k_pct|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.k_pct|percents_to_hundreds|floatformat:"1"|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.bb_pct|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.bb_pct|percents_to_hundreds|floatformat:"1"|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.wrc_plus|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 %}{{ best_stats.hit_stats.wrc_plus|floatformat:"0"|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.xavg|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 and best_stats.hit_stats.xavg %}{{ best_stats.hit_stats.xavg|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.xwoba|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 and best_stats.hit_stats.xwoba %}{{ best_stats.hit_stats.xwoba|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
<td data-value="{% if best_stats and best_stats.hit_stats %}{{ best_stats.hit_stats.xslg|default_if_none:"-999" }}{% else %}-999{% endif %}">
    {% if best_stats and best_stats.hit_stats %}{% if best_stats.hit_stats.pa > 0 and best_stats.hit_stats.xslg %}{{ best_stats.hit_stats.xslg|floatformat:3|kill_leading_zero|default_if_none:"-" }}{% else %}-{% endif %}{% else %}-{% endif %}
</td>
{% endwith %} 