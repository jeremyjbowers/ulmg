{% extends 'base.html' %}

{% block content %}

{% include "includes/search_bar.html" %}

<div class="columns">
    <div class="column">
        {% if players %}
            <p>Found {{ players.paginator.count }} player{% if players.paginator.count > 1 %}s{% endif %} that match your query.</p>
        {% else %}
            <p>No players found.</p>
        {% endif %}
    </div>
</div>

{% if players.paginator.count > 99 %}{% include "includes/pagination.html" %}{% endif %}

<table class="table is-fullwidth" data-sortable>
    <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Position</th>
        <th>Level</th>
        <th>Team</th>
        <th>Owned?</th>
        <th>Carded?</th>
        <th>Pro?</th>
        <th>Prospect?</th>
        <th>Usage</th>
        <th>BA rank</th>
        <th>MLB rank</th>
        <th>FG rank</th>
    </tr>
    {% for p in players %}
        <tr>
            <td style="text-align: left!important;"><span class="has-text-weight-semibold">
                <a href="{% if p.team %}/teams/{{ p.team.abbreviation }}/#player-{{ p.id }}{% else %}/players/search/?name={{ p.name }}{% endif %}">{{ p.name }}</a> <a href="/admin/ulmg/player/{{ p.id }}/change/">&#x270E;</a><br/>
                {% if p.bbref_url %}<a class="has-text-weight-light is-size-6" target="_blank" href="{{ p.bbref_url }}">BBR &Gt;</a>{% endif %}
                {% if p.fangraphs_url %}<a class="has-text-weight-light is-size-6" target="_blank" href="{{ p.fangraphs_url }}">FG &Gt;</a>{% endif %}
                {% if p.ba_url %}<a class="has-text-weight-light is-size-6"  target="_blank" href="{{ p.ba_url }}">BA &Gt;</a>{% endif %}
            </td>
            <td>{{ p.age|default_if_none:"-" }}</td>
            <td>{{ p.position }}</td>
            <td>{{ p.level|default_if_none:"-" }}</td>
            <td>{% if p.team %}<a href="/teams/{{ p.team.abbreviation }}/">{{ p.team }}</a>{% else %}-{% endif %}</td>
            <td>{% if p.is_owned %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td>{% if p.is_carded %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td>{% if p.is_amateur %}<span class="red">&cross;</span>{% else %}<span class="green">&checkmark;</span>{% endif %}</td>
            <td>{% if p.is_prospect %}<span class="green">&checkmark;</span>{% else %}<span class="red">&cross;</span>{% endif %}</td>
            <td>{{ p.usage|default_if_none:"" }}</td>
            <td>{{ p.ba_prospect_rank|default_if_none:"" }}</td>
            <td>{{ p.mlb_prospect_rank|default_if_none:"" }}</td>
            <td>{{ p.fg_prospect_rank|default_if_none:"" }}</td>
        </tr>
    {% endfor %}
</table>

{% if players.paginator.count > 99 %}{% include "includes/pagination.html" %}{% endif %}
{% endblock %}